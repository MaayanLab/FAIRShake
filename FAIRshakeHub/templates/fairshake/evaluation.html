{% extends "fairshake/base.html" %}

{% block header %}
    {{ block.super }}

    {% block style %}
        {{ block.super }}
        <link rel="stylesheet" href="{% static 'style/evaluation.css' %}" />
    {% endblock %}
{% endblock %}

{% block content %}
<div class="container-fluid">
    <h2 style="text-align: center;"><b>Evaluation:</b> <a href="{{ resource.url }}" target="_blank">{{ resource.title }}</a></h2>
    <h4 style="text-align:center;"><b>ID:</b> {{ resource.id }} &nbsp; <b>Type:</b> {{ resource.type }}</h4>
    <h4 id="bottom-heading" style="text-align:center;"><b>Description:</b> {{ resource.description }}</h4>
    <form action="/evaluation/" id="evaluation-form" method="POST">
        {% csrf_token %}
        <input type="hidden" name="resource_id" value={{ resource.id }}>
        <input type="hidden" name="rubric_ids" id="rubric_ids">
        <script>document.getElementById("rubric_ids").value=JSON.stringify({{ rubric_ids|safe }});</script>
        {% for rubric in rubrics %}
            <fieldset class="form-group"><legend>{{ rubric.title }}</legend>
                {% for metric in rubric.metrics.all %}
                    {% include "fairshake/question_kinds/"|add:metric.type|add:".html" with metric=metric answer=metric.answers.first %}
                {% endfor %}
            </fieldset>
        {% endfor %}
        </tbody>
    </form>
    <div class="submitBtn">
        <button class="btn btn-default" type="submit" form="evaluation-form" value="Submit">Submit</button>
    </div>
    <div class="cancelBtn">
        <button class="btn btn-default" type="submit" value="Cancel" onclick="javascript:window.history.back()">Cancel</button>
    </div>
</div>
{% endblock %}